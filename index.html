<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Find You</title>
</head>

<body>
    <h1 class="mb-5 pt-5 pb-3 text-center bg-success text-white display-5">üåçExibindo seu posicionamento globalüó∫</h1>
    <div class="row d-flex justify-content-center">
        <button type="button" class="btn btn-success m-3 w-25" onclick="pegarLocalizacao()">Pesquisar</button>
        <div id="resultado" class="text-center">

        </div>
    </div>

    <script>
        // Captura a refer√™ncia ao elemento com id "resultado" para poder manipular o conte√∫do dele depois
        const resultado = document.getElementById("resultado");

        // Fun√ß√£o chamada ao clicar no bot√£o "Pesquisar"
        function pegarLocalizacao() {
            // Verifica se o navegador suporta o recurso de geolocaliza√ß√£o
            if (navigator.geolocation) {
                // Se suportar, tenta obter a posi√ß√£o atual do usu√°rio
                // O m√©todo getCurrentPosition recebe duas fun√ß√µes:
                // - A primeira (mostrarPosicao) √© chamada se a localiza√ß√£o for obtida com sucesso
                // - A segunda (mostrarErro) √© chamada se houver algum erro ao tentar obter a localiza√ß√£o
                // - O terceiro (opcional) permite personaliza√ß√µes 
                navigator.geolocation.getCurrentPosition(mostrarPosicao, mostrarErro, {
                    enableHighAccuracy: true, // Pede mais precis√£o
                    timeout: 10000, // Espera at√© 10 segundos para obter a posi√ß√£o
                    maximumAge: 0 // Garante que a posi√ß√£o n√£o seja uma antiga salva em cache
                });
            } else {
                // Caso o navegador n√£o suporte geolocaliza√ß√£o, exibe uma mensagem de aviso
                resultado.innerHTML = "Geolocaliza√ß√£o n√£o √© suportada por este navegador";
            }
        }

        // Fun√ß√£o chamada se houver erro ao tentar obter a localiza√ß√£o
        function mostrarErro(error) {
            // Usa um "switch" para tratar diferentes tipos de erro que podem ocorrer
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    // Erro 1: O usu√°rio negou a permiss√£o para o site acessar a localiza√ß√£o
                    resultado.innerHTML = "O usu√°rio negou a solicita√ß√£o de geolocaliza√ß√£o.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    // Erro 2: A localiza√ß√£o n√£o est√° dispon√≠vel (GPS desligado, sem internet, etc.)
                    resultado.innerHTML = "As informa√ß√µes de localiza√ß√£o n√£o est√£o dispon√≠veis.";
                    break;
                case error.TIMEOUT:
                    // Erro 3: O tempo para obter a localiza√ß√£o expirou
                    resultado.innerHTML = "A solicita√ß√£o para obter a localiza√ß√£o do usu√°rio expirou";
                    break;
                case error.UNKNOWN_ERROR:
                    // Erro 4: Algum erro desconhecido aconteceu
                    resultado.innerHTML = "Ocorreu um erro desconhecido.";
                    break;
            }
        }

        // Fun√ß√£o chamada quando a localiza√ß√£o √© obtida com sucesso
        function mostrarPosicao(posicao) {
            // Insere a latitude e longitude no elemento "resultado"
            // `posicao.coords.latitude` e `posicao.coords.longitude` pegam os dados da posi√ß√£o retornada
            resultado.innerHTML = `Latitude: ${posicao.coords.latitude}
    <br>Longitude: ${posicao.coords.longitude}
    <br> <a href="https://www.google.com.br/maps/@${posicao.coords.latitude},${posicao.coords.longitude},20z?entry=ttu">
    <h4>Ver no mapa</h4></a>`;
            // O link gerado leva diretamente para o Google Maps com as coordenadas obtidas
        }

    </script>
</body>

</html>
